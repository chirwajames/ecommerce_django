{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
       <link rel="stylesheet"
          href="{% static 'app1/css/styles.css' %}"

        />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <!-- Font Awesome -->
        <link
          href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
          rel="stylesheet"
        />
        <!-- Google Fonts -->
        <link
          href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap"
          rel="stylesheet"
        />
    <!-- Font Awesome -->
        <link
          href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
          rel="stylesheet"
        />
        <!-- Google Fonts -->
        <link
          href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap"
          rel="stylesheet"
        />
        <!-- MDB -->
        <link
          href="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/7.2.0/mdb.min.css"
          rel="stylesheet"
        />
        <script src="https://code.jquery.com/jquery-3.7.1.min.js"
        integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>

    <title>Home</title>
</head>
<body>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
         integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
<!--nav class="navbar navbar-expand-lg navbar-light bg-body-tertiary">
  <div class="container-fluid">
    <ul class="navbar-nav">
      <!- Avatar ->
      <li class="nav-item dropdown">
        <a
          data-mdb-dropdown-init
          class="nav-link dropdown-toggle d-flex align-items-center"
          href="#"
          id="navbarDropdownMenuLink"
          role="button"
          aria-expanded="false"
        >
          <img
            src="https://mdbcdn.b-cdn.net/img/Photos/Avatars/img (31).webp"
            class="rounded-circle"
            height="22"
            alt="Portrait of a Woman"
            loading="lazy"
          />
        </a>
        <ul class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
          <li>
            <a class="dropdown-item" href="#">My profile</a>
          </li>
          <li>
            <a class="dropdown-item" href="#">Settings</a>
          </li>
          <li>
            <a class="dropdown-item" href="#">Logout</a>
          </li>
        </ul>
      </li>
    </ul>
  </div>
</nav-->
<header>
  <!-- Animated navbar-->
 <!-- Navbar -->
<nav class="navbar sticky-top navbar-expand-lg navbar-light bg-body-tertiary">
  <!-- Container wrapper -->
  <div class="container-fluid">
    <!-- Toggle button -->
    <button
      data-mdb-collapse-init
      class="navbar-toggler"
      type="button"
      data-mdb-target="#navbarSupportedContent"
      aria-controls="navbarSupportedContent"
      aria-expanded="false"
      aria-label="Toggle navigation"
    >
      <i class="fas fa-bars"></i>
    </button>

    <!-- Collapsible wrapper -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <!-- Navbar brand -->
      <a class="navbar-brand mt-2 mt-lg-0" href="{% url 'index' %}">
         <img
          src="{% static 'app1/images/Logo.jpeg' %}"
          height="40"
          alt="MDB Logo"
          loading="lazy"
        />
      </a>
      <!-- Left links -->
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
        <li class="nav-item">
          <a class="nav-link" href="{% url 'index' %}">Home</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#">Team</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#">Projects</a>
        </li>
           <li class="nav-item">
          <a class="nav-link" href="{% url 'search' %}">Search</a>
        </li>
      </ul>
        <div class="dropdown">
        <a data-mdb-dropdown-init
          class="link-secondary me-3 dropdown-toggle hidden-arrow"
          href="#"
          role="button"
          aria-expanded="false">Categories
        </a>
        <ul
          class="dropdown-menu dropdown-menu-end"
          aria-labelledby="navbarDropdownMenuLink">
         <li>
            <a class="dropdown-item" href="{% url 'category' 'Clothes' %}">Clothes</a>
          </li>
           <li>
            <a class="dropdown-item" href="{% url 'category' 'Shoes' %}">Shoes</a>
          </li>
            <li>
            <a class="dropdown-item" href="{% url 'category' 'Technology' %}">Technology</a>
          </li>
        </ul>
         </div>
      <!-- Left links -->
    </div>
      <!-- Left links -->
    </div>
    <!-- Collapsible wrapper -->

    <!-- Right elements -->
    <div class="d-flex align-items-center">
      <!-- Icon -->
      <a class="link-secondary me-3" href="{% url 'cart_summary' %}">
        <i class="fas fa-shopping-cart"></i>
          <span class="badge rounded-pill badge-notification bg-danger" id="cart_quantity">{{ cart| length }}</span>
      </a>

      <!-- Notifications -->
      <div class="dropdown">
        <a
          data-mdb-dropdown-init
          class="link-secondary me-3 dropdown-toggle hidden-arrow"
          href="#"
          id="navbarDropdownMenuLink"
          role="button"
          aria-expanded="false"
        >
          <i class="fas fa-bell"></i>
          <span class="badge rounded-pill badge-notification bg-danger">0</span>
        </a>
        <ul
          class="dropdown-menu dropdown-menu-end"
          aria-labelledby="navbarDropdownMenuLink"
        >
          <li>
            <a class="dropdown-item" href="#">Some news</a>
          </li>
          <li>
            <a class="dropdown-item" href="#">Another news</a>
          </li>
          <li>
            <a class="dropdown-item" href="#">Something else here</a>
          </li>
        </ul>
      </div>
      <!-- Avatar -->
      <div class="dropdown">
        <a
          data-mdb-dropdown-init
          class="dropdown-toggle d-flex align-items-center hidden-arrow"
          href="#"
          id="navbarDropdownMenuAvatar"
          role="button"
          aria-expanded="false"
        >
          <img
            src="https://mdbcdn.b-cdn.net/img/new/avatars/2.webp"
            class="rounded-circle"
            height="25"
            alt="Black and White Portrait of a Man"
            loading="lazy"
          />
        </a>
        <ul
          class="dropdown-menu dropdown-menu-end"
          aria-labelledby="navbarDropdownMenuAvatar"
        >

            {% if user.is_authenticated %}
              <li>
            <a class="dropdown-item" href="{% url 'update_user' %}">Update Profile</a>
          </li>
            <li>
            <a class="dropdown-item" href="{% url 'user_profile' %}">My profile</a>
          </li>
          <li>
            <a class="dropdown-item" href="#">Settings</a>
          </li>
            <li>
            <a class="dropdown-item" href="{% url 'logout' %}">Logout</a>
            </li>
            {% else %}
            <li>
            <a class="dropdown-item" href="{% url 'login' %}">Login</a>
          </li>
             <li>
            <a class="dropdown-item" href="{% url 'register' %}">Register</a>
          </li>
            {% endif %}

        </ul>
      </div>
    </div>
    <!-- Right elements -->
  </div>
  <!-- Container wrapper -->
</nav>
<!-- Navbar -->

  <!-- Background image -->
  {% if messages %}
        {% for message in messages %}
            <div class="alert alert-warning alert-dismissible fade show" role="alert">
                {{ message }}
              <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>

        {% endfor %}

  {% endif %}
  <div
       id="intro"
       class="bg-image"
       style="
              background-image: url(https://mdbcdn.b-cdn.net/img/new/fluid/city/113.jpg);
              height: 40vh;
              "
       >
    <div class="mask text-white" style="background-color: rgba(0, 0, 0, 0.8)">
      <div class="container d-flex align-items-center text-center h-100">
        <div>
          <h1 class="mb-5">This is title</h1>
          <p>
            Lorem ipsum dolor, sit amet consectetur adipisicing elit. Officiis molestiae
            laboriosam numquam expedita ullam saepe ipsam, deserunt provident corporis,
            sit non accusamus maxime, magni nulla quasi iste ipsa architecto? Autem!
          </p>
        </div>
      </div>
    </div>
  </div>
  <!-- Background image -->
</header>

<div class="container justify-content-center" style="margin-top:5%; ">
  <h1 class="display-6 text-center">Products</h1>
    <hr class="hr hr-blurry" />



  <div class="card mb-4">
  <div class="row g-0">
    <div class="col-md-4">
      <img
        src="{{ product.image.url }}"
        alt="Trendy Pants and Shoes"
        class="img-fluid rounded-start"
      />
    </div>
    <div class="col-md-8">
      <div class="card-body">
        <h5 class="card-title">{{ product.name }}</h5>
           {% if product.is_sale %}
            <div class=" position-absolute" style="top: 0.5 rem; right:0.5rem;">
                            <span class="badge badge-danger" >Sale</span>
                        </div>
         <h5 class="card-title" style="padding-right:10%;"> {{ product.sale_price }} &nbsp; <strike>
                              {{ product.price }}
                          </strike></h5>
        {% else %}
          <h5>{{ product.price }}</h5>


        {% endif %}


        <p class="card-text">
          This is a wider card with supporting text below as a natural lead-in to
          additional content. This content is a little bit longer.
        </p>
        <select class="form-select-md" aria-label="Default select example" id="qty_cart">
              <option value="1">1</option>
              <option value="2">2</option>
              <option value="3">3</option>
        </select>
          <br/><br/>
         <a class="btn btn-dark" href="{% url 'index' %}" data-mdb-ripple-init>
                           Back
                        </a>

            <button class="btn btn-dark" value="{{product.id}}" id="add_cart" data-mdb-ripple-init>Add to cart</button>

      </div>
    </div>
  </div>
</div>
    <br/><br/><br/><br/><br/><br/>
<footer class="bg-body-tertiary text-center text-lg-start fixed-bottom">
  <!-- Copyright -->
  <div class="text-center p-3" style="background-color: rgba(0, 0, 0, 0.05);">
    Â© 2020 Copyright:
    <a class="text-body" href="https://mdbootstrap.com/">MDBootstrap.com</a>
  </div>
  <!-- Copyright -->
</footer>
</div>
<script>
      $(document).on('click', '#add_cart', function(e){
            e.preventDefault();
            var url = '/add_cart/'
            $.ajax({
               type: 'POST',
               url: url,
               data: {
                product_id: $('#add_cart').val(),
                product_qty: $('#qty_cart option:selected').text(),
                csrfmiddlewaretoken : "{{ csrf_token }}",
                action: 'post'
               },
                success: function(json){
                    console.log($('#add_cart').val())
                    console.log(json)
                    document.getElementById('cart_quantity').
                    textContent = json.qty
                },

                error: function(xhr, errmsg,err){


                }

            });

  });
</script>
<script src="{% static 'app1/js/scripts.js'  %}"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
        integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js"
        integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy" crossorigin="anonymous"></script>
<script
  type="text/javascript"
  src="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/7.2.0/mdb.umd.min.js"
></script>

</body>
</html>